<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Male_Fashion Template">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Welcome to Mbayat </title>
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="css/style.css" type="text/css">
    <link rel="stylesheet" href="css/main.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
        integrity="sha512-..." crossorigin="anonymous" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
        integrity="sha512-Cw8FZc+5IiEQMzN5wl4oCx4w77LThnMf5eB8Pm1WObU9eHmDpplKTt6Xe/B+49uNAX69NR/8hSN6GR8imdb8A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<style>
    #logout a:hover {
        cursor: pointer;
        text-decoration: underline;
        color: rgb(110, 198, 183);
    }

    .add-button {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: rgb(110, 198, 183);
        border: none;
        border-radius: 15px;
        width: 100px;
        height: 30px;
        cursor: pointer;
        color: white;
        font-size: 12.5px;
        margin: auto;
        display: block;
        margin-bottom: 20px;
    }

    .button-icon {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid white;
        border-radius: 50%;
        text-align: center;
        line-height: 18px;
        margin-right: 5px;
    }

    .button-text {
        font-weight: bold;
    }

    .pause-button {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background-color: rgb(163, 54, 75);
        border: none;
        border-radius: 15px;
        width: 100px;
        height: 30px;
        cursor: pointer;
        color: white;
        font-size: 12.5px;
        margin: auto;
    }

    .pause-button-icon {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid white;
        border-radius: 50%;
        text-align: center;
        line-height: 15px;
        margin-right: 5px;
    }

    .pause-button-text {
        font-weight: bold;
        margin-left: 10px;
    }

    body {
        margin: 0;
        /* overflow: hidden; */
    }

    #canvas {
        width: 100%;
        height: 100%;
    }

    .gallery-container {
        margin: auto;
        width: 55%;
        box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        border-radius: 10px;
        margin-top: 5px;
    }

    .gallery-date {
        margin: auto;
        width: 30%;
        padding: 5px 20px;
    }
</style>
<style>
    .carousel-slide {
        display: flex;
        overflow: hidden;
        width: 50%;
        /* Display one slide at a time */
        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset;

    }

    .slide {
        flex: 0 0 100%;
        margin-right: 10px;
        box-shadow: rgba(50, 50, 93, 0.25) 0px 30px 60px -12px;
        /* border: 1px solid red; */
        display: flex;
        flex-direction: column;
        height: 300px;
        background-color: white;
        border-radius: 10px;
        padding: 30px;
        animation: slideAnimation 6s linear infinite;
        width: 300px;
        /* 6s for 2s per slide, adjust as needed */
    }

    .carousel {
        margin: 0 auto;
        width: 50%;
        /* You can adjust the width as needed */
        max-height: 300px;
        /* You can adjust the height as needed */
    }

    * {
        box-sizing: border-box;
    }

    body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
    }

    .carousel-container {
        width: 70%;
        margin: 0 auto;
        overflow: hidden;
        position: relative;
    }

    .carousel-slide {
        display: flex;
        width: 300%;
        height: 300px;
        transition: transform 0.4s ease-in-out;
    }

    .carousel-slide div {
        flex: 0 0 33.33%;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
    }

    .carousel-slide img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .dropdown {
        position: relative;
        display: inline-block;
        /* border: 1px solid red; */
        width: 142px;
    }

    .dropbtn {
        background-color: #f1f1f1;
        color: #333;
        padding: 10px;
        font-size: 18px;
        border: none;
        cursor: pointer;
        /* border: 1px solid red; */
        width: 142px;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        background-color: #fff;
        min-width: 120px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        z-index: 1;
    }

    .dropdown-content a {
        color: #333;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        cursor: pointer;
    }

    .dropdown-content a:hover {
        background-color: #f9f9f9;
    }

    .dropdown:hover .dropdown-content {
        display: block;
    }

    .dropdown:hover .dropbtn {
        background-color: rgb(110, 198, 183);
    }

    .dropbtn:hover {
        background-color: rgb(110, 198, 183);
        color: white;

    }

    .dropdown .dropbtn {
        position: relative;
        padding-right: 25px;
        /* Added padding for the icon */
    }

    .dropdown .dropdown-icon {
        position: absolute;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);
        width: 0;
        height: 0;
        border-style: solid;
        border-width: 5px 5px 0 5px;
        border-color: #333 transparent transparent transparent;
        transition: transform 0.2s ease-in-out;
    }

    .dropdown.open .dropdown-icon {
        transform: translateY(-50%) rotate(180deg);
    }

    #logout-link:hover {
        color: rgb(110, 198, 183);
    }

    .dropdown-content a {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        text-decoration: none;
        color: #333;
    }

    .dropdown-content a i {
        margin-right: 10px;
    }

    #pause-button {
        background: none;
        border: none;
        outline: none;
        position: relative;
        width: 30px;
        height: 30px;
        border-radius: 50%;
    }

    #pause-button i {
        font-size: 16px;
        color: #000;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    #pause-button .fas.fa-pause:before {
        content: "";
        position: absolute;
        top: 6px;
        left: 6px;
        width: 4px;
        height: 12px;
        background-color: #000;
    }

    #pause-button .fas.fa-pause:after {
        content: "";
        position: absolute;
        top: 6px;
        left: 14px;
        width: 4px;
        height: 12px;
        background-color: #000;
    }

    #add-button {
        padding: 10px 15px;
        background-color: #2196F3;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #add-button i {
        margin-right: 5px;
    }

    .pause-button i {
        font-size: 12px;
        margin-right: 0px;

    }

    .nav-item.dropdown-item {
        display: flex;
        justify-content: space-between;
    }

    #container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        max-height: 400px;
        overflow: auto;
    }

    .interest-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    #container input[name="item-checkbox"] {
        margin-right: 5px;
    }

    #sub_container {
        display: flex;
        /* flex-direction: ; */
        gap: 10px;
    }

    #sub_container input[name="subitem-checkbox"] {
        margin-right: 5px;
    }

    #container h6,
    #sub_container h6 {
        margin: 5px 0;
        font-weight: bold;
    }

    /* CSS for Address Display */
    /* CSS for Address Display */
    .address-container {
        display: flex;
        flex-direction: column;
    }

    .address-div {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
    }

    .address-div label {
        margin-bottom: 5px;
    }

    .address-div button {
        background-color: #007bff;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 3px;
        cursor: pointer;
    }

    .address-div input[type="radio"] {
        margin-right: 10px;
    }

    /* CSS for Address Display */
    .address-container {
        display: flex;
        flex-direction: column;
    }

    .address-div {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        border: 1px solid #ccc;
        padding: 10px;
        border-radius: 5px;
    }

    .address-div label {
        margin-bottom: 5px;
    }

    .address-div button {
        border: none;
        padding: 5px 10px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 14px;
        display: flex;
        align-items: center;
    }

    .address-div button.edit-button {
        background-color: #007bff;
        color: #fff;
    }


    .address-div button.edit-button svg {
        margin-right: 5px;
    }

    .address-div button.delete-button {
        background-color: #f44336;
        color: #fff;
    }

    .address-div button.delete-button svg {
        margin-right: 5px;
    }

    .address-div {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border: 1px solid #ddd;
        padding: 10px;
        margin-bottom: 10px;
    }

    .button-container {
        display: flex;
        align-items: center;
    }

    .edit-button,
    .delete-button {
        background-color: transparent;
        border: none;
        cursor: pointer;
        font-size: 16px;
        color: #333;
        margin-left: 10px;
    }

    .edit-button:hover,
    .delete-button:hover {
        color: #007bff;
    }

    /* Style for the address container */
    .address-container {
        border: 1px solid #ccc;
        padding: 15px;
        margin-bottom: 10px;
        border-radius: 10px;
        background-color: #f9f9f9;
    }

    .address-container label {
        display: block;
        margin-bottom: 5px;
    }

    /* Style for the edit and delete buttons */
    .button-container {
        display: flex;
        justify-content: flex-end;
        margin-top: 10px;
    }

    .edit-button {
        border: none;
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        margin-right: 10px;
        border-radius: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
    }

    .edit-button:hover {
        background-color: #0056b3;
    }

    .delete-button {
        border: none;
        background-color: #dc3545;
        color: white;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        display: flex;
        align-items: center;
    }

    .delete-button:hover {
        background-color: #c82333;
    }

    .address-div input[type="radio"] {
        display: inline-block;
        width: 20px;
        height: 20px;
        margin-right: 10px;
    }

    .dropbtn.active {
        background-color: rgb(110, 198, 183);
    }

    #vendor-signup-btn {
        background-color: rgb(177, 43, 82);
        border: 1px solid black;
    }

    #corporate-signup-btn {
        background-color: rgb(177, 43, 82);
        border: 1px solid black;
    }
</style>

<style>
    /* CSS for the loading overlay */
    /* CSS for the loading overlay */
    #loading-overlay {
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 1);
        /* Change the background color to white */
        z-index: 9999;
    }

    #loading-spinner {
        background-color: #fff;
        padding: 20px;
        border-radius: 5px;
    }


    body {
        background-color: white;
    }

    @keyframes loading-dots {

        0%,
        20% {
            content: ".";
        }

        30% {
            content: "...";
        }

        40% {
            content: "...";
        }

        60% {
            content: "....";
        }

        80%,
        100% {
            content: ".....";
        }
    }

    #loading-dots::after {
        content: "";
        display: inline-block;
        animation: loading-dots 1s infinite;
    }
</style>


<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container">
            <div class="row" style="display: flex; justify-content: space-between;">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <a href="index.html"><img src="img/Mbayat-Final-Logo (1).png" alt=""></a>
                    </div>
                </div>

                <div style="display: flex; ">
                    <div class="header__nav__option" id="accountname" style="text-align: center; padding-top: 36px;">

                    </div>
                    <div class="header__nav__option" id="accountname" style="text-align: center;">
                        <div class="dropdown">
                            <button class="dropbtn">
                                <i class="fas fa-user"></i>&nbsp; &nbsp;
                                Account
                                <i class="dropdown-icon  "></i>
                            </button>
                            <div class="dropdown-content">
                                <a id="logout-link"
                                    style="font-size: 15px; border-bottom: 1px solid gray; border-radius: 0px;"
                                    class="nav-link" id="account-orders-tab" data-toggle="tab" href="#account-orders"
                                    role="tab" aria-controls="account-orders" aria-selected="false"><i
                                        class="fas fa-shopping-bag"></i>&nbsp; &nbsp;My
                                    Orders</a>
                                <a id="logout-link"
                                    style="font-size: 15px; border-bottom: 1px solid gray;border-radius: 0px;"
                                    class="nav-link" id="account-address-tab" data-toggle="tab" href="#account-address"
                                    role="tab" aria-controls="account-address" aria-selected="false"><i
                                        class="fas fa-address-card"></i>&nbsp;
                                    &nbsp;Address</a>
                                <a id="logout-link"
                                    style="font-size: 15px; border-bottom: 1px solid gray;border-radius: 0px;"
                                    class="nav-link" id="account-address-tab" data-toggle="tab" href="#account-wishlist"
                                    role="tab" aria-controls="account-address" aria-selected="false"><i
                                        class="fas fa-heart"></i>&nbsp; &nbsp;Wishlist</a>
                                <a id="logout-link" onclick="return handleLogout(event);"
                                    style="font-size: 15px; border-radius: 0px;"><i
                                        class="fas fa-sign-out-alt"></i>&nbsp; &nbsp;Logout</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </header>

    <div style="display: flex; flex-direction: column; margin: auto ;  width: 50%;">
        <h2 style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif; margin: auto ;"> Dashboard
            Loading<span id="loading-dots"></h2>
        <div id="loading-spinner">
            <img src="img/Loading Gif/bill.gif" alt="Loading..." style="width: 200px; margin: auto ; display: block;">
        </div>
    </div>

    <!-- Footer Section Begin -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-6">
                    <div class="footer__about">
                        <div class="footer__logo" style="width: 70%;">
                            <a href="/"><img src="img/logo-mbyat (1).png" alt=""></a>
                        </div>
                        <p>Mbayat is a mystery subscription box tailored to costumer's interest, where you will get the
                            opportunity to try and experience new products and services matching your interest provided
                            by local brands and companies each month.</p>
                        <a href="#"><img src="img/logo.png" alt=""
                                style="width: 65px; height: 45px; border-radius: 2px;"></a>
                    </div>
                </div>
                <div class="col-lg-4 col-md-4 col-sm-6">
                    <div class="footer__widget">
                        <h6>NewLetter</h6>
                        <div class="footer__newslatter">
                            <p>Be the first to know about new arrivals, look books, sales & promos!</p>
                            <form action="#">
                                <input type="text" placeholder="Your email">
                                <button type="submit"><span class="icon_mail_alt"></span></button>
                            </form>
                        </div>
                        <div class="hero__social">
                            <!-- <a href="#"><i class="fa fa-facebook"></i></a> -->
                            <a href="https://twitter.com/trymbayat"><i class="fa fa-twitter"></i></a>
                            <a href="https://www.instagram.com/trymbayat/"><i class="fa fa-instagram"></i></a>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-6">
                    <div class="footer__widget">
                        <h6>CONTACT US</h6>
                        <div class="footer__newslatter">
                            <p>MBAYAT Kuwait, Sharq, Ahmed Al Jaber Street, Al Gaz Tower,</p>
                            <div class="social_add">
                                <a href="tell:+965 90015060">+965 90015060</a>
                                <a href="info:info@trymbayat.com">info@trymbayat.com</a>
                                <div>
                                    <a href="venderSignup.html" class="btn btn-primary px-4 py-2 mt-4"
                                        id="vendor-signup-btn">Vendor Signup</a>
                                    <!-- <a href="corporateSignup.html" class="btn btn-primary px-4 py-2 mt-4"
                                        id="corporate-signup-btn">Corporate Signup</a> -->
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="row footer__copyright__text">
                <div class="col-lg-6 text-left">
                    <div class="">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        <p>Copyright ©
                            <script>
                                document.write(new Date().getFullYear());
                            </script>
                            <i class="fa fa-heart-o" aria-hidden="true"></i> <a href="#" target="_blank"> MBAYAT</a>
                        </p>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="footer-link">
                        <ul>
                            <li>
                                <a href="contact.html">Contact Us</a>
                            </li>
                            <li>
                                <a href="about.html">About Us</a>
                            </li>
                            <li>
                                <a href="privacy-statement.html">Privacy policy</a>
                            </li>
                            <li>
                                <a href="terms-and-conditions.html">Terms & Conditions</a>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- Search Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Search here.....">
            </form>
        </div>
    </div>
    <!-- Search End -->

    <!-- Js Plugins -->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.nice-select.min.js"></script>
    <script src="js/jquery.nicescroll.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.countdown.min.js"></script>
    <script src="js/jquery.slicknav.js"></script>
    <script src="js/mixitup.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        // Carousel logic
        const carouselSlide = document.querySelector('.carousel-slide');
        const slides = carouselSlide.querySelectorAll('div');
        const slideWidth = slides[0].clientWidth;
        const slideDuration = 2000; // 2 seconds
        const totalDuration = slides.length * slideDuration;
        let counter = 0;
        let interval;

        function startSlide() {
            interval = setInterval(() => {
                carouselSlide.style.transition = 'transform 0.4s ease-in-out';
                carouselSlide.style.transform = 'translateX(' + (-slideWidth * counter) + 'px)';
                counter++;

                if (counter >= slides.length) {
                    counter = 0;
                }
            }, slideDuration);

            setTimeout(() => {
                clearInterval(interval);
                carouselSlide.style.transition = 'none';
                carouselSlide.style.transform = 'translateX(0)';
                counter = 0;
                startSlide();
            }, totalDuration);
        }

        startSlide();

        carouselSlide.addEventListener('transitionend', () => {
            if (counter >= slides.length) {
                carouselSlide.style.transition = 'none';
                carouselSlide.style.transform = 'translateX(0)';
                counter = 0;
            }
        });
    </script>
    <script>
        const ALLOWED_PATHS = ['/my-account.html'];

        function isAllowedPath(path) {
            return ALLOWED_PATHS.includes(path);
        }

        function isLoggedIn() {
            return localStorage.getItem('access_token') !== null;
        }

        function redirectIfNotLoggedIn() {
            if (!isLoggedIn()) {
                window.location.href = 'login.html';
            }
        }

        function redirectIfNotAllowed() {
            if (!isAllowedPath(window.location.pathname)) {
                redirectIfNotLoggedIn();
            }
        }

        window.addEventListener('load', redirectIfNotAllowed);

        function handleLogout(event) {
            event.preventDefault()
            localStorage.removeItem("access_token")
            window.location.reload()
        }

        document.addEventListener("DOMContentLoaded", function () {
            var name = localStorage.getItem("first_name");

            var accountName = document.getElementById("accountname");
            // var logoutLink = document.getElementById("logout");

            if (!isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }

            var welcomeText = document.createElement("a");
            welcomeText.textContent = `Welcome, ${name}!`;
            welcomeText.style.fontWeight = "200"

            accountName.appendChild(welcomeText);
            // logoutLink.addEventListener("click", handleLogout);
        });


        function fetchData() {
            fetch('https://15.185.57.60/api/v1/interest/interest-lists?fetchType=all')
                .then(response => response.json())
                .then(data => {
                    const interests = data.results;
                    const container = document.getElementById('container');

                    container.innerHTML = '';

                    interests.forEach(interest => {
                        const checkbox = document.createElement('input');
                        checkbox.className = 'form-check-input';
                        checkbox.id = interest.id;
                        checkbox.type = 'checkbox';
                        checkbox.name = 'item-checkbox';
                        checkbox.value = interest.name;

                        const label = document.createElement('label');
                        label.className = 'form-check-label';
                        label.htmlFor = checkbox.id;
                        label.textContent = interest.name;

                        const div = document.createElement('div');
                        div.className = 'form-check';
                        div.appendChild(checkbox);
                        div.appendChild(label);

                        checkbox.addEventListener('change', function () {
                            if (this.checked) {
                                fetchSubinterests(interest);
                            } else {
                                removeSubinterests(interest.id);
                            }
                        });

                        container.appendChild(div);

                        // Check the checkbox for interest if it is present in userInterests
                        const userInterests = JSON.parse(localStorage.getItem("userInterests")) || [];
                        if (userInterests.includes(interest.id)) {
                            checkbox.checked = true;
                            fetchSubinterests(interest); // Fetch subinterests for checked interest
                        }
                    });
                })
                .catch(error => {
                    console.error('Error fetching interests:', error);
                });
        }

        function fetchSubinterests(interest, userSubInterests) {
            fetch(`https://15.185.57.60/api/v1/interest/sub-interest-by-id/${interest.id}`)
                .then(response => response.json())
                .then(subInterestsData => {
                    const subinterests = subInterestsData.data;
                    const subinterestContainer = document.createElement('div');
                    subinterestContainer.className = 'interest-container';
                    subinterestContainer.id = `interest_${interest.id}`;
                    subinterestContainer.style.marginRight = '20px';
                    const interestHeading = document.createElement('h6');
                    interestHeading.textContent = `${interest.name}`;
                    subinterestContainer.appendChild(interestHeading);

                    const subinterestsContainer = document.getElementById('sub_container');
                    subinterests.forEach(subInterest => {
                        const subInterestCheckbox = document.createElement('input');
                        subInterestCheckbox.type = 'checkbox';
                        subInterestCheckbox.name = 'subitem-checkbox';
                        subInterestCheckbox.value = subInterest.id;
                        subInterestCheckbox.checked = isSubinterestChecked(subInterest.id, userSubInterests);
                        subinterestContainer.appendChild(subInterestCheckbox);

                        const subInterestLabel = document.createElement('label');
                        subInterestLabel.textContent = subInterest.name;
                        subinterestContainer.appendChild(subInterestLabel);
                    });

                    // Append the subinterest container to the main container
                    subinterestsContainer.appendChild(subinterestContainer);
                })
                .catch(error => {
                    console.error('Error fetching subinterests:', error);
                });
        }

        function removeSubinterests(interestId) {
            const subContainer = document.getElementById('sub_container');
            const interestContainer = document.getElementById(`interest_${interestId}`);
            subContainer.removeChild(interestContainer);
        }

        fetchData();

        function populateAccountDetailsForm(userId) {
            const token = localStorage.getItem("access_token");
            fetch(`https://15.185.57.60/api/v1/users/${userId}`, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            })
                .then(function (response) {
                    return response.json();
                })
                .then(function (data) {
                    document.getElementById("acdetails-firstname").value = data.first_name;
                    document.getElementById("acdetails-lastname").value = data.last_name;
                    document.getElementById("acdetails-email").value = data.email;
                    document.getElementById("acdetails-password").value = data.mobile_number;
                    document.getElementById("acdetails-displayname").value = data.date_of_birth;
                    const genderSelect = document.getElementById("acdetails-gender");
                    const genderOptions = genderSelect.options;
                    for (let i = 0; i < genderOptions.length; i++) {
                        if (genderOptions[i].value === data.gender) {
                            genderOptions[i].selected = true;
                            break;
                        }
                    }
                    const userInterests = data.interests.map(interest => interest.id);
                    const userSubInterests = data.subInterests.map(subinterest => subinterest.id);
                    // console.log("userSubInterests", userSubInterests);

                    const interestsCheckboxes = document.querySelectorAll('#container input[name="item-checkbox"]');
                    interestsCheckboxes.forEach(checkbox => {
                        checkbox.checked = userInterests.includes(checkbox.id);
                        if (checkbox.checked) {
                            fetchSubinterests({ id: checkbox.id, name: checkbox.value }, userSubInterests); // Fetch subinterests for checked interest
                        }
                    });

                    // const subinterestsCheckboxes = document.querySelectorAll('#sub_container input[name="subitem-checkbox"]');
                    // console.log("subinterestsCheckboxes",subinterestsCheckboxes);
                    // subinterestsCheckboxes.forEach(checkbox => {
                    //     console.log("cjheck", checkbox);
                    //     const subinterestId = checkbox.id;
                    //     checkbox.checked = userSubInterests.includes(subinterestId); // Check using custom function
                    // });
                })
                .catch(function (error) {
                    console.error("Error fetching user data:", error);
                });
        }

        const userId = localStorage.getItem("loginId");
        if (userId) {
            populateAccountDetailsForm(userId);
        }

        function isSubinterestChecked(subinterestId, userSubInterests) {
            // Check if the subinterestId is present in the userSubInterests array
            return userSubInterests.includes(subinterestId);
        }


        function openAddAddressModal() {
            const modal = document.getElementById('addAddressModal');
            modal.style.display = 'block';
        }

        // Function to close the Add Address modal
        function closeAddAddressModal() {
            const modal = document.getElementById('addAddressModal');
            modal.style.display = 'none';
        }

        function openEditAddressModal(address) {
            const modal = document.getElementById('editAddressModal');
            modal.style.display = 'block';
        }

        // Function to close the Add Address modal
        function closeEditAddressModal() {
            const modal = document.getElementById('editAddressModal');
            modal.style.display = 'none';
        }

        async function fetchAddresses() {
            const userId = localStorage.getItem("loginId");
            const token = localStorage.getItem("access_token");
            try {
                const response = await fetch(`https://15.185.57.60/api/v1/users/get-all-shipping-address/${userId}`, {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    }
                });

                if (!response.ok) {
                    throw new Error('Failed to fetch addresses.');
                }

                const addresses = await response.json();
                console.log(addresses.data);

                const addresse = addresses.data;

                const subContainer = document.getElementById('address_container');
                addresse.forEach(address => {
                    const addressDiv = document.createElement('div');
                    addressDiv.classList.add('address-div');
                    addressDiv.innerHTML = `
                    <div>
                        <input type="checkbox" name="address-radio" value="${address.state}-${address.country}" onclick="editAddress(event)" />
                        <label>${address.houseNo}, ${address.apartment}, ${address.floor}, ${address.avenue}, ${address.direction}, ${address.street1}, ${address.street2}, ${address.city}, ${address.state}, ${address.country}.</label>
                    </div>
                    <div class="button-container">
                        <button onclick="handleEditButtonClick(${JSON.stringify(address)})" type="button" class="edit-button" style="border-radius: 10px; display:flex; height: 40px; padding: 15px; align-items:center">
                            <i class="fas fa-edit" style="margin-right:10px"></i>Edit
                        </button>
                        <button style="border-radius: 10px; display: flex; height: 40px; padding: 15px; align-items:center" type="button" class="delete-button" onclick="deleteAddress(this)">
                            <i class="fas fa-trash-alt" style="margin-right:10px"></i>Delete
                        </button>
                    </div>
                `;
                    subContainer.appendChild(addressDiv);
                });
            } catch (error) {
                console.error('Error fetching addresses:', error);
            }
        }

        fetchAddresses()

        function editAddress(event) {
            const target = event.target;
            if (target.type === 'radio') {
                const selectedValue = target.value;
                console.log("Selected Value:", selectedValue);

                const [state, country] = selectedValue.split('-');

                const selectedAddressDiv = document.getElementById('selectedAddress');
                selectedAddressDiv.textContent = `${state}, ${country}`;
            }
        }

        function toggleGiftDropdown() {
            var dropdown = document.querySelector(".dropdown-content");
            var dropbtn = document.querySelector(".dropbtn");

            dropbtn.classList.toggle("active");

            if (dropdown.style.display === "block") {
                dropdown.style.display = "none";
                dropbtn.classList.remove("active");
            } else {
                dropdown.style.display = "block";
                dropbtn.classList.add("active");
            }
        }

        document.addEventListener("click", function (event) {
            var dropdown = document.querySelector(".dropdown-content");
            var dropbtn = document.querySelector(".dropbtn");

            if (!event.target.matches(".dropbtn") && dropdown.style.display === "block") {
                dropdown.style.display = "none";
                dropbtn.classList.remove("active");
            }
        });
        const areasByState = {
            'Al Asimah': ['Kuwait City', 'Sharq', 'Jaber Al-Ahmad City', 'Mirqab', 'Dasman', 'Salhiya', 'Salmiya', 'Hawally', 'Mishref', 'Bayan'],
            'Hawalli': ['Mishref', 'Salmiya', 'Bayan', 'Rumaithiya', 'Salwa', 'Rai'],
            'Farwaniya': ['Al Dajeej', 'Abdullah Al-Mubarak Al-Sabah', 'Al-Rai', 'Jleeb Al-Shuyoukh', 'Al-Riggae', 'Khaitan'],
            'Ahmadi': ['Fintas', 'Manqaf', 'Wafrah', 'Riqqh'],
            'Mubarak Alkabeer': ['Abu Fatira', 'Abu Halifa', 'Al Wafra', 'Bnaider', 'Fahaheel', 'Jaber Al Ahmad', 'Mangaf'],
            'Jahra': ['Naseem', 'Al Sulaibikhat', 'Amghara', 'Kabad', 'Jahra Industrial Area', 'Qasr']
        }

        function populateAreas() {
            const stateDropdown = document.getElementById('state');

            const selectedState = stateDropdown.value;
            // console.log("selectedState", selectedState);
            const areaDropdown = document.getElementById('area');

            areaDropdown.innerHTML = '';

            const selectAreaOption = document.createElement('option');
            selectAreaOption.value = '';
            selectAreaOption.textContent = 'Select Area';
            areaDropdown.appendChild(selectAreaOption);

            const selectedStateAreas = areasByState[selectedState];
            // console.log("selectedStateAreas", selectedStateAreas);

            if (selectedStateAreas) {
                selectedStateAreas.forEach(area => {
                    const option = document.createElement('option');
                    option.value = area;
                    option.textContent = area;
                    areaDropdown.appendChild(option);
                    // console.log("areaDropdown", areaDropdown);

                });
            }
            console.log("stateDropdown", stateDropdown);
            console.log("areaDropdown", areaDropdown);

        }


        document.addEventListener('DOMContentLoaded', function () {

            populateAreas();

            document.getElementById('state').addEventListener('change', populateAreas);
        });
        function handleEditButtonClick(addressString) {
            const address = JSON.parse(addressString);
            openEditAddressModal(address);
        }

    </script>

</body>

</html>






<!-- 



<style>
    /* CSS for the loading overlay */
    /* CSS for the loading overlay */
    #loading-overlay {
        display: flex;
        justify-content: center;
        align-items: center;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 1);
        /* Change the background color to white */
        z-index: 9999;
    }

    #loading-spinner {
        background-color: #fff;
        padding: 20px;
        border-radius: 5px;
    }


    body {
        background-color: white;
    }

    @keyframes loading-dots {

        0%,
        20% {
            content: "";
        }

        40% {
            content: ".";
        }

        60% {
            content: "..";
        }

        80%,
        100% {
            content: "...";
        }
    }

    #loading-dots::after {
        content: "";
        display: inline-block;
        animation: loading-dots 1s infinite;
    }
</style>